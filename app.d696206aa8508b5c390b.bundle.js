!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e,i){(function(t,i){var r=200,n="__lodash_hash_undefined__",s=1,o=2,h=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",b="[object GeneratorFunction]",y="[object Map]",g="[object Number]",w="[object Null]",v="[object Object]",x="[object Proxy]",_="[object RegExp]",k="[object Set]",B="[object String]",m="[object Symbol]",T="[object Undefined]",S="[object ArrayBuffer]",E="[object DataView]",P=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[a]=A[c]=A[S]=A[u]=A[E]=A[f]=A[d]=A[p]=A[y]=A[g]=A[v]=A[_]=A[k]=A[B]=A["[object WeakMap]"]=!1;var D="object"==typeof t&&t&&t.Object===Object&&t,O="object"==typeof self&&self&&self.Object===Object&&self,L=D||O||Function("return this")(),z=e&&!e.nodeType&&e,M=z&&"object"==typeof i&&i&&!i.nodeType&&i,R=M&&M.exports===z,I=R&&D.process,$=function(){try{return I&&I.binding&&I.binding("util")}catch(t){}}(),W=$&&$.isTypedArray;function H(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}function U(t){var e=-1,i=Array(t.size);return t.forEach(function(t,r){i[++e]=[r,t]}),i}function F(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}var G,V,C,Y=Array.prototype,N=Function.prototype,q=Object.prototype,J=L["__core-js_shared__"],K=N.toString,Q=q.hasOwnProperty,X=(G=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Z=q.toString,tt=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=R?L.Buffer:void 0,it=L.Symbol,rt=L.Uint8Array,nt=q.propertyIsEnumerable,st=Y.splice,ot=it?it.toStringTag:void 0,ht=Object.getOwnPropertySymbols,at=et?et.isBuffer:void 0,ct=(V=Object.keys,C=Object,function(t){return V(C(t))}),lt=$t(L,"DataView"),ut=$t(L,"Map"),ft=$t(L,"Promise"),dt=$t(L,"Set"),pt=$t(L,"WeakMap"),bt=$t(Object,"create"),yt=Ft(lt),gt=Ft(ut),wt=Ft(ft),vt=Ft(dt),xt=Ft(pt),_t=it?it.prototype:void 0,kt=_t?_t.valueOf:void 0;function Bt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function mt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function St(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Tt;++e<i;)this.add(t[e])}function Et(t){var e=this.__data__=new mt(t);this.size=e.size}function Pt(t,e){var i=Ct(t),r=!i&&Vt(t),n=!i&&!r&&Yt(t),s=!i&&!r&&!n&&Qt(t),o=i||r||n||s,h=o?function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}(t.length,String):[],a=h.length;for(var c in t)!e&&!Q.call(t,c)||o&&("length"==c||n&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ut(c,a))||h.push(c);return h}function jt(t,e){for(var i=t.length;i--;)if(Gt(t[i][0],e))return i;return-1}function At(t){return null==t?void 0===t?T:w:ot&&ot in Object(t)?function(t){var e=Q.call(t,ot),i=t[ot];try{t[ot]=void 0;var r=!0}catch(t){}var n=Z.call(t);r&&(e?t[ot]=i:delete t[ot]);return n}(t):function(t){return Z.call(t)}(t)}function Dt(t){return Kt(t)&&At(t)==a}function Ot(t,e,i,r,n){return t===e||(null==t||null==e||!Kt(t)&&!Kt(e)?t!=t&&e!=e:function(t,e,i,r,n,h){var l=Ct(t),p=Ct(e),b=l?c:Ht(t),w=p?c:Ht(e),x=(b=b==a?v:b)==v,T=(w=w==a?v:w)==v,P=b==w;if(P&&Yt(t)){if(!Yt(e))return!1;l=!0,x=!1}if(P&&!x)return h||(h=new Et),l||Qt(t)?Mt(t,e,i,r,n,h):function(t,e,i,r,n,h,a){switch(i){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S:return!(t.byteLength!=e.byteLength||!h(new rt(t),new rt(e)));case u:case f:case g:return Gt(+t,+e);case d:return t.name==e.name&&t.message==e.message;case _:case B:return t==e+"";case y:var c=U;case k:var l=r&s;if(c||(c=F),t.size!=e.size&&!l)return!1;var p=a.get(t);if(p)return p==e;r|=o,a.set(t,e);var b=Mt(c(t),c(e),r,n,h,a);return a.delete(t),b;case m:if(kt)return kt.call(t)==kt.call(e)}return!1}(t,e,b,i,r,n,h);if(!(i&s)){var j=x&&Q.call(t,"__wrapped__"),A=T&&Q.call(e,"__wrapped__");if(j||A){var D=j?t.value():t,O=A?e.value():e;return h||(h=new Et),n(D,O,i,r,h)}}if(!P)return!1;return h||(h=new Et),function(t,e,i,r,n,o){var h=i&s,a=Rt(t),c=a.length,l=Rt(e).length;if(c!=l&&!h)return!1;for(var u=c;u--;){var f=a[u];if(!(h?f in e:Q.call(e,f)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var p=!0;o.set(t,e),o.set(e,t);for(var b=h;++u<c;){f=a[u];var y=t[f],g=e[f];if(r)var w=h?r(g,y,f,e,t,o):r(y,g,f,t,e,o);if(!(void 0===w?y===g||n(y,g,i,r,o):w)){p=!1;break}b||(b="constructor"==f)}if(p&&!b){var v=t.constructor,x=e.constructor;v!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof x&&x instanceof x)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,i,r,n,h)}(t,e,i,r,Ot,n))}function Lt(t){return!(!Jt(t)||(e=t,X&&X in e))&&(Nt(t)?tt:P).test(Ft(t));var e}function zt(t){if(i=(e=t)&&e.constructor,r="function"==typeof i&&i.prototype||q,e!==r)return ct(t);var e,i,r,n=[];for(var s in Object(t))Q.call(t,s)&&"constructor"!=s&&n.push(s);return n}function Mt(t,e,i,r,n,h){var a=i&s,c=t.length,l=e.length;if(c!=l&&!(a&&l>c))return!1;var u=h.get(t);if(u&&h.get(e))return u==e;var f=-1,d=!0,p=i&o?new St:void 0;for(h.set(t,e),h.set(e,t);++f<c;){var b=t[f],y=e[f];if(r)var g=a?r(y,b,f,e,t,h):r(b,y,f,t,e,h);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!H(e,function(t,e){if(s=e,!p.has(s)&&(b===t||n(b,t,i,r,h)))return p.push(e);var s})){d=!1;break}}else if(b!==y&&!n(b,y,i,r,h)){d=!1;break}}return h.delete(t),h.delete(e),d}function Rt(t){return function(t,e,i){var r=e(t);return Ct(t)?r:function(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}(r,i(t))}(t,Xt,Wt)}function It(t,e){var i,r,n=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function $t(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Lt(i)?i:void 0}Bt.prototype.clear=function(){this.__data__=bt?bt(null):{},this.size=0},Bt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Bt.prototype.get=function(t){var e=this.__data__;if(bt){var i=e[t];return i===n?void 0:i}return Q.call(e,t)?e[t]:void 0},Bt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:Q.call(e,t)},Bt.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=bt&&void 0===e?n:e,this},mt.prototype.clear=function(){this.__data__=[],this.size=0},mt.prototype.delete=function(t){var e=this.__data__,i=jt(e,t);return!(i<0||(i==e.length-1?e.pop():st.call(e,i,1),--this.size,0))},mt.prototype.get=function(t){var e=this.__data__,i=jt(e,t);return i<0?void 0:e[i][1]},mt.prototype.has=function(t){return jt(this.__data__,t)>-1},mt.prototype.set=function(t,e){var i=this.__data__,r=jt(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this},Tt.prototype.clear=function(){this.size=0,this.__data__={hash:new Bt,map:new(ut||mt),string:new Bt}},Tt.prototype.delete=function(t){var e=It(this,t).delete(t);return this.size-=e?1:0,e},Tt.prototype.get=function(t){return It(this,t).get(t)},Tt.prototype.has=function(t){return It(this,t).has(t)},Tt.prototype.set=function(t,e){var i=It(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this},St.prototype.add=St.prototype.push=function(t){return this.__data__.set(t,n),this},St.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new mt,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var i=this.__data__;if(i instanceof mt){var n=i.__data__;if(!ut||n.length<r-1)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Tt(n)}return i.set(t,e),this.size=i.size,this};var Wt=ht?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,r=null==t?0:t.length,n=0,s=[];++i<r;){var o=t[i];e(o,i,t)&&(s[n++]=o)}return s}(ht(t),function(e){return nt.call(t,e)}))}:function(){return[]},Ht=At;function Ut(t,e){return!!(e=null==e?h:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function Ft(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Gt(t,e){return t===e||t!=t&&e!=e}(lt&&Ht(new lt(new ArrayBuffer(1)))!=E||ut&&Ht(new ut)!=y||ft&&"[object Promise]"!=Ht(ft.resolve())||dt&&Ht(new dt)!=k||pt&&"[object WeakMap]"!=Ht(new pt))&&(Ht=function(t){var e=At(t),i=e==v?t.constructor:void 0,r=i?Ft(i):"";if(r)switch(r){case yt:return E;case gt:return y;case wt:return"[object Promise]";case vt:return k;case xt:return"[object WeakMap]"}return e});var Vt=Dt(function(){return arguments}())?Dt:function(t){return Kt(t)&&Q.call(t,"callee")&&!nt.call(t,"callee")},Ct=Array.isArray;var Yt=at||function(){return!1};function Nt(t){if(!Jt(t))return!1;var e=At(t);return e==p||e==b||e==l||e==x}function qt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Jt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Kt(t){return null!=t&&"object"==typeof t}var Qt=W?function(t){return function(e){return t(e)}}(W):function(t){return Kt(t)&&qt(t.length)&&!!A[At(t)]};function Xt(t){return null!=(e=t)&&qt(e.length)&&!Nt(e)?Pt(t):zt(t);var e}i.exports=function(t,e){return Ot(t,e)}}).call(this,i(1),i(2)(t))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var r=i(0),n=i.n(r);const s=function(){const t=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}(),o=Symbol(),h=Symbol(),a=Symbol(),c=Symbol(),l=Symbol(),u=Symbol(),f=Symbol();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function p(t,e){function i(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function b(t){return"function"==typeof t}var y=!1,g={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;y=t},get useDeprecatedSynchronousErrorHandling(){return y}};function w(t){setTimeout(function(){throw t})}var v={closed:!0,next:function(t){},error:function(t){if(g.useDeprecatedSynchronousErrorHandling)throw t;w(t)},complete:function(){}},x=Array.isArray||function(t){return t&&"number"==typeof t.length};function _(t){return null!=t&&"object"==typeof t}var k,B={e:{}};function m(){try{return k.apply(this,arguments)}catch(t){return B.e=t,B}}function T(t){return k=t,m}function S(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}S.prototype=Object.create(Error.prototype);var E=S,P=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var i=this._parent,r=this._parents,n=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var o=-1,h=r?r.length:0;i;)i.remove(this),i=++o<h&&r[o]||null;if(b(n))T(n).call(this)===B&&(e=!0,t=t||(B.e instanceof E?j(B.e.errors):[B.e]));if(x(s))for(o=-1,h=s.length;++o<h;){var a=s[o];if(_(a))if(T(a.unsubscribe).call(a)===B){e=!0,t=t||[];var c=B.e;c instanceof E?t=t.concat(j(c.errors)):t.push(c)}}if(e)throw new E(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var r=i;(i=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.prototype._addParent=function(t){var e=this._parent,i=this._parents;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function j(t){return t.reduce(function(t,e){return t.concat(e instanceof E?e.errors:e)},[])}var A="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),D=function(t){function e(i,r,n){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,s._parentSubscription=null,arguments.length){case 0:s.destination=v;break;case 1:if(!i){s.destination=v;break}if("object"==typeof i){i instanceof e?(s.syncErrorThrowable=i.syncErrorThrowable,s.destination=i,i.add(s)):(s.syncErrorThrowable=!0,s.destination=new O(s,i));break}default:s.syncErrorThrowable=!0,s.destination=new O(s,i,r,n)}return s}return p(e,t),e.prototype[A]=function(){return this},e.create=function(t,i,r){var n=new e(t,i,r);return n.syncErrorThrowable=!1,n},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(P),O=function(t){function e(e,i,r,n){var s,o=t.call(this)||this;o._parentSubscriber=e;var h=o;return b(i)?s=i:i&&(s=i.next,r=i.error,n=i.complete,i!==v&&(b((h=Object.create(i)).unsubscribe)&&o.add(h.unsubscribe.bind(h)),h.unsubscribe=o.unsubscribe.bind(o))),o._context=h,o._next=s,o._error=r,o._complete=n,o}return p(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;g.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=g.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):w(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;w(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};g.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),g.useDeprecatedSynchronousErrorHandling)throw t;w(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!g.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return g.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(w(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(D);var L="function"==typeof Symbol&&Symbol.observable||"@@observable";function z(){}function M(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:z}var R=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var r=this.operator,n=function(t,e,i){if(t){if(t instanceof D)return t;if(t[A])return t[A]()}return t||e||i?new D(t,e,i):new D(v)}(t,e,i);if(r?r.call(n,this.source):n.add(this.source||g.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),g.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){g.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,i=e.closed,r=e.destination,n=e.isStopped;if(i||n)return!1;t=r&&r instanceof D?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=I(e))(function(e,r){var n;n=i.subscribe(function(e){try{t(e)}catch(t){r(t),n&&n.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[L]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:M(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=I(t))(function(t,i){var r;e.subscribe(function(t){return r=t},function(t){return i(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function I(t){if(t||(t=g.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var $=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r.pending=!1,r}return p(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,r=void 0;try{this.work(t)}catch(t){i=!0,r=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,i){return t.call(this)||this}return p(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(P)),W=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}(),H=new(function(t){function e(i,r){void 0===r&&(r=W.now);var n=t.call(this,i,function(){return e.delegate&&e.delegate!==n?e.delegate.now():r()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return p(e,t),e.prototype.schedule=function(i,r,n){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(i,r,n):t.prototype.schedule.call(this,i,r,n)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(W))($);function U(t,e){var i;return void 0===t&&(t=0),void 0===e&&(e=H),(x(i=t)||!(i-parseFloat(i)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=H),new R(function(i){return i.add(e.schedule(F,t,{subscriber:i,counter:0,period:t})),i})}function F(t){var e=t.subscriber,i=t.counter,r=t.period;e.next(i),this.schedule({subscriber:e,counter:i+1,period:r},r)}function G(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new V(t,e))}}var V=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new C(t,this.project,this.thisArg))},t}(),C=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.project=i,n.count=0,n.thisArg=r||n,n}return p(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(D);Object.prototype.toString;function Y(t,e,i,r){return b(i)&&(r=i,i=void 0),r?Y(t,e,i).pipe(G(function(t){return x(t)?r.apply(void 0,t):r(t)})):new R(function(r){!function t(e,i,r,n,s){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var h=e;e.addEventListener(i,r,s),o=function(){return h.removeEventListener(i,r,s)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var a=e;e.on(i,r),o=function(){return a.off(i,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(i,r),o=function(){return c.removeListener(i,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,u=e.length;l<u;l++)t(e[l],i,r,n,s)}n.add(o)}(t,e,function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,i)})}var N={leading:!0,trailing:!1};var q=function(){function t(t,e,i,r){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new J(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),J=function(t){function e(e,i,r,n,s){var o=t.call(this,e)||this;return o.duration=i,o.scheduler=r,o.leading=n,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return p(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(K,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(D);function K(t){t.subscriber.clearThrottle()}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return function(e){return G(function(t,e){return function(i){for(var r=i,n=0;n<e;n++){var s=r[t[n]];if(void 0===s)return;r=s}return r}}(t,i))(e)}}function X(t,e){return function(i){return i.lift(new Z(t,e))}}var Z=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new tt(t,this.predicate,this.thisArg))},t}(),tt=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.predicate=i,n.thisArg=r,n.count=0,n}return p(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(D);var et=class{constructor({x:t,y:e,width:i,height:r}){this.x=t,this.y=e,this.width=i,this.height=r}};const it=80,rt=4,nt=10,st=20;var ot=class{constructor(){this.horizontalDelta=0,this.height=rt,this.width=it,this.paddingBottom=st,this.speed=nt,this.canvasWidth=0,this.canvasHeight=0,this.isBallSticked=!0,this.power=0}restoreToDefaultWidth(){this.width=it}setCanvasSize(t,e){this.canvasWidth=t,this.canvasHeight=e}getRect(){return new et({x:parseInt(this.canvasWidth/2,10)+this.horizontalDelta-parseInt(this.width/2,10),y:this.canvasHeight-this.paddingBottom,width:this.width,height:this.height})}goLeft(){const{x:t}=this.getRect();t-this.speed<0||(this.horizontalDelta-=this.speed)}goRight(){const{x:t,width:e}=this.getRect();t+e+this.speed>this.canvasWidth||(this.horizontalDelta+=this.speed)}release(){this.isBallSticked=!1}};var ht=class{constructor(t,e){this.x=t,this.y=e}};function at(t){let e=t.length;for(;0!==e;){const i=Math.floor(Math.random()*e);e-=1,[t[e],t[i]]=[t[i],t[e]]}return t}const ct=5;var lt=class{constructor(){this.pos=new ht(0,0),this.degree=0,this.radius=ct,this.setRandomDegree(85,95)}restoreToDefaultRadius(){this.radius=ct}setPos(t,e){this.pos.x=t,this.pos.y=e}setDegree(t){this.degree=t}setRandomDegree(t,e){const i=Array.from({length:e-t+1},(e,i)=>i+t);this.setDegree(at(i)[0])}setRandomDeltaDegree(t,e){const i=Array.from({length:e-t+1},(e,i)=>i+t);this.setDegree(this.degree+at(i)[0]),this.degree<5&&this.setDegree(5),this.degree>175&&this.setDegree(175)}getNextPos(){const t=this.degree*(Math.PI/180),e=1*Math.sin(t),i=1*Math.cos(t),{x:r,y:n}=this.pos;return{x:r+i,y:n-e}}setNextPos(){const t=this.getNextPos();this.setPos(t.x,t.y)}setDegreeByCollisions(t){const e=t.includes("TOP"),i=t.includes("LEFT"),r=t.includes("BOTTOM"),n=t.includes("RIGHT"),{degree:s}=this,o=0<=s&&s<=90,h=90<=s&&s<=180,a=180<=s&&s<=270,c=270<=s&&s<=360;return!i&&!n||0!==s&&180!==s?!e&&!r||90!==s&&270!==s?o&&n?this.setDegree(180-s):o&&e?this.setDegree(360-s):o&&e&&n?this.setDegree(270-s):h&&e?this.setDegree(360-s):h&&i?this.setDegree(180-s):h&&e&&i?this.setDegree(450-s):a&&i?this.setDegree(540-s):a&&r?this.setDegree(360-s):a&&r&&i?this.setDegree(270-s):c&&n?this.setDegree(540-s):c&&r?this.setDegree(360-s):c&&r&&n?this.setDegree(450-s):void 0:this.setDegree(360-s):this.setDegree(Math.abs(s-180))}};const ut=30,ft=10;var dt=class{constructor(t,e){this.pos=new ht(t,e),this.width=ut,this.height=ft}setNextPos(){this.pos.y+=.2}};function pt(){return parseInt(+new Date/1e3,10)}var bt=[[{x:24,y:40,width:30,height:20,color:"#b2bec3",isBreakable:!0},{x:64,y:40,width:30,height:20,color:"#a29bfe",isBreakable:!0},{x:104,y:40,width:30,height:20,color:"#74b9ff",isBreakable:!0},{x:144,y:40,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:184,y:40,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:224,y:40,width:30,height:20,color:"#ffeaa7",isBreakable:!0},{x:264,y:40,width:30,height:20,color:"#fab1a0",isBreakable:!0},{x:304,y:40,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:344,y:40,width:30,height:20,color:"#fd79a8",isBreakable:!0},{x:42,y:68,width:30,height:20,color:"#fd79a8",isBreakable:!0},{x:82,y:68,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:122,y:68,width:30,height:20,color:"#fab1a0",isBreakable:!0},{x:162,y:68,width:30,height:20,color:"#ffeaa7",isBreakable:!0},{x:202,y:68,width:30,height:20,color:"#a29bfe",isBreakable:!0},{x:242,y:68,width:30,height:20,color:"#74b9ff",isBreakable:!0},{x:282,y:68,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:322,y:68,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:24,y:96,width:30,height:20,color:"#dfe6e9",isBreakable:!0},{x:64,y:96,width:30,height:20,color:"#a29bfe",isBreakable:!0},{x:104,y:96,width:30,height:20,color:"#74b9ff",isBreakable:!0},{x:144,y:96,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:184,y:96,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:224,y:96,width:30,height:20,color:"#fd79a8",isBreakable:!0},{x:264,y:96,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:304,y:96,width:30,height:20,color:"#fab1a0",isBreakable:!0},{x:344,y:96,width:30,height:20,color:"#ffeaa7",isBreakable:!0},{x:42,y:124,width:30,height:20,color:"#fd79a8",isBreakable:!0},{x:82,y:124,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:122,y:124,width:30,height:20,color:"#fab1a0",isBreakable:!0},{x:162,y:124,width:30,height:20,color:"#ffeaa7",isBreakable:!0},{x:202,y:124,width:30,height:20,color:"#a29bfe",isBreakable:!0},{x:242,y:124,width:30,height:20,color:"#74b9ff",isBreakable:!0},{x:282,y:124,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:322,y:124,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:24,y:152,width:30,height:20,color:"#dfe6e9",isBreakable:!0},{x:64,y:152,width:30,height:20,color:"#a29bfe",isBreakable:!0},{x:104,y:152,width:30,height:20,color:"#74b9ff",isBreakable:!0},{x:144,y:152,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:184,y:152,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:224,y:152,width:30,height:20,color:"#ffeaa7",isBreakable:!0},{x:264,y:152,width:30,height:20,color:"#fab1a0",isBreakable:!0},{x:304,y:152,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:344,y:152,width:30,height:20,color:"#fd79a8",isBreakable:!0},{x:42,y:180,width:30,height:20,color:"#fd79a8",isBreakable:!0},{x:82,y:180,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:122,y:180,width:30,height:20,color:"#fab1a0",isBreakable:!0},{x:162,y:180,width:30,height:20,color:"#ffeaa7",isBreakable:!0},{x:202,y:180,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:242,y:180,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:282,y:180,width:30,height:20,color:"#74b9ff",isBreakable:!0},{x:322,y:180,width:30,height:20,color:"#a29bfe",isBreakable:!0},{x:24,y:208,width:30,height:20,color:"#dfe6e9",isBreakable:!0},{x:64,y:208,width:30,height:20,color:"#a29bfe",isBreakable:!0},{x:104,y:208,width:30,height:20,color:"#74b9ff",isBreakable:!0},{x:144,y:208,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:184,y:208,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:224,y:208,width:30,height:20,color:"#ffeaa7",isBreakable:!0},{x:264,y:208,width:30,height:20,color:"#fab1a0",isBreakable:!0},{x:304,y:208,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:344,y:208,width:30,height:20,color:"#fd79a8",isBreakable:!0}],[{x:24,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:64,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:104,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:144,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:184,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:224,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:264,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:304,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:344,y:40,width:30,height:20,color:"#778beb",isBreakable:!0},{x:144,y:96,width:30,height:20,color:"#778beb",isBreakable:!0},{x:224,y:96,width:30,height:20,color:"#778beb",isBreakable:!0},{x:42,y:68,width:30,height:20,color:"#fd79a8",isBreakable:!0},{x:82,y:68,width:30,height:20,color:"#ff7675",isBreakable:!0},{x:282,y:68,width:30,height:20,color:"#81ecec",isBreakable:!0},{x:322,y:68,width:30,height:20,color:"#55efc4",isBreakable:!0},{x:64,y:124,width:30,height:20,color:"#778beb",isBreakable:!0},{x:122,y:124,width:30,height:20,color:"#e84393",isBreakable:!0},{x:162,y:124,width:30,height:20,color:"#e84393",isBreakable:!0},{x:202,y:124,width:30,height:20,color:"#e84393",isBreakable:!0},{x:242,y:124,width:30,height:20,color:"#e84393",isBreakable:!0},{x:304,y:124,width:30,height:20,color:"#778beb",isBreakable:!0},{x:64,y:152,width:30,height:20,color:"#778beb",isBreakable:!0},{x:144,y:152,width:30,height:20,color:"#e84393",isBreakable:!0},{x:184,y:152,width:30,height:20,color:"#e84393",isBreakable:!0},{x:224,y:152,width:30,height:20,color:"#e84393",isBreakable:!0},{x:304,y:152,width:30,height:20,color:"#778beb",isBreakable:!0},{x:42,y:180,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:82,y:180,width:30,height:20,color:"#34495e",isBreakable:!1},{x:162,y:180,width:30,height:20,color:"#e84393",isBreakable:!0},{x:202,y:180,width:30,height:20,color:"#e84393",isBreakable:!0},{x:282,y:180,width:30,height:20,color:"#34495e",isBreakable:!1},{x:322,y:180,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:24,y:208,width:30,height:20,color:"#778beb",isBreakable:!0},{x:64,y:208,width:30,height:20,color:"#778beb",isBreakable:!0},{x:104,y:208,width:30,height:20,color:"#778beb",isBreakable:!0},{x:144,y:208,width:30,height:20,color:"#34495e",isBreakable:!1},{x:184,y:208,width:30,height:20,color:"#e84393",isBreakable:!0},{x:224,y:208,width:30,height:20,color:"#34495e",isBreakable:!1},{x:264,y:208,width:30,height:20,color:"#778beb",isBreakable:!0},{x:304,y:208,width:30,height:20,color:"#778beb",isBreakable:!0},{x:344,y:208,width:30,height:20,color:"#778beb",isBreakable:!0},{x:24,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:64,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:104,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:144,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:184,y:238,width:30,height:20,color:"#34495e",isBreakable:!1},{x:224,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:264,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:304,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0},{x:344,y:238,width:30,height:20,color:"#63cdda",isBreakable:!0}]];var yt=class{constructor(t){this.draw=t||(()=>{}),this.hasWon=!1,this.hasLost=!1,this.isStarted=!1,this.isPaused=!1,this.level=1,this.score=0,this.startedTime=0,this.pausedTime=0,this.wonTime=0,this.effectStartedAt=0,this.effect=null,this.ship=new ot,this.ball=new lt,this.setBricks(),this.pills=[],this.init()}setBricks(){this.bricks=bt[this.level-1].slice();const t=this.bricks.filter(t=>t.isBreakable),e=Array.from({length:t.length},(t,e)=>e),i=Math.ceil(.05*t.length,10),r=at(e);r.length=i,this.bricks=this.bricks.map((t,e)=>(r.includes(e)&&(t.hasPill=!0),t))}start(){this.isStarted=!0,this.startedTime=pt()}getDuration(){return this.hasLost?this.lostTime-this.startedTime:this.hasWon?this.wonTime-this.startedTime:this.isPaused?this.pausedTime-this.startedTime:0!==this.startedTime?pt()-this.startedTime:0}init(){var t,e,i;this.animation$=U(0,W.animationFrame).subscribe(()=>this.draw(this)),this.mousedown$=Y(document,"keydown").pipe((t=10,void 0===e&&(e=H),void 0===i&&(i=N),function(r){return r.lift(new q(t,e,i.leading,i.trailing))}),Q("key")),this.esc$=this.mousedown$.pipe(X(t=>"Escape"===t)).subscribe(()=>{if(!this.hasWon&&this.isStarted)return this.isPaused?this.resume():this.pause()}),this.space$=this.mousedown$.pipe(X(t=>" "===t)).subscribe(()=>{this.isStarted||(this.start(),this.ship.release())}),this.left$=this.mousedown$.pipe(X(t=>"ArrowLeft"===t)).subscribe(()=>{if(this.isPaused)return;const{ship:t}=this;t.goLeft(),t.power<0&&(t.power=0),t.power+=4,t.power=Math.min(t.power,30)}),this.right$=this.mousedown$.pipe(X(t=>"ArrowRight"===t)).subscribe(()=>{if(this.isPaused)return;const{ship:t}=this;t.goRight(),t.power>0&&(t.power=0),t.power-=4,t.power=Math.max(t.power,-30)})}resume(){const t=pt()-this.pausedTime;this.startedTime+=t,this.pausedTime=0,this.isPaused=!1}pause(){this.pausedTime=pt(),this.isPaused=!0}win(){this.hasWon=!0,this.wonTime=pt()}clearBricks(t){t.forEach(t=>{const e=this.bricks[t];if(e.isBreakable&&(this.bricks.splice(t,1),this.score+=40,e.hasPill)){const{x:t,y:i}=e;this.pills.push(new dt(t,i+e.height/2))}})}check(t){if(!this.hasWon&&!this.hasLost)return this.ball.pos.y>t+20?this.lose():void(0===this.bricks.filter(t=>t.isBreakable).length&&this.win())}lose(){this.hasLost=!0,this.lostTime=pt()}hasNextLevel(){return void 0!==bt[this.level]}toNextLevel(){this.isStarted=!1,this.hasWon=!1,this.startedTime=0,this.wonTime=0,this.level+=1,this.setBricks()}reset(){this.score=0,this.isStarted=!1,this.hasWon=!1,this.hasLost=!1,this.startedTime=0,this.wonTime=0,this.lostTime=0,this.level=1,this.ship.isBallSticked=!0,this.pills.length=0,this.setBricks(),this.clearEffect()}clearEffect(){this.effect=null,this.effectStartedAt=0,this.ship.restoreToDefaultWidth(),this.ball.restoreToDefaultRadius()}clearEffectIfNeeded(){pt()-this.effectStartedAt>15&&this.clearEffect()}applyPillEffect(){this.clearEffect();const t=[o,h,a,c,l,u,f];this.effect=at(t)[0],this.effectStartedAt=pt(),this.effect===o&&(this.ship.width=2.5*this.ship.width),this.effect===h&&(this.ship.width=.5*this.ship.width),this.effect===a&&(this.ball.radius=1.5*this.ball.radius),this.effect===c&&(this.ball.radius=.5*this.ball.radius)}};function gt(t){return t*(Math.PI/180)}var wt=class{constructor(t){this.ctx=t}fillRect(t,e="black"){const{x:i,y:r,width:n,height:s}=t,{ctx:o}=this;o.fillStyle=e,o.fillRect(i,r,n,s)}rect(t,e="#555"){const{x:i,y:r,width:n,height:s}=t,{ctx:o}=this;o.beginPath(),o.strokeStyle=e,o.rect(i,r,n,s),o.stroke(),o.closePath()}drawCircle(t,e,i,r="black"){const{ctx:n}=this;n.beginPath(),n.fillStyle=r,n.arc(t,e,i,0,2*Math.PI),n.fill(),n.closePath()}showGameTip(t,e,i){const{ctx:r}=this;r.font="11pt Arial",r.textAlign="center",r.fillText(t.toUpperCase(),e,i)}showScore(t,e,i){const{ctx:r}=this;r.font="11pt Arial",r.textAlign="right",r.fillText(t,e,i)}showLevel(t,e,i){const{ctx:r}=this;r.font="11pt Arial",r.textAlign="center",r.fillText(`LEVEL ${t}`,e,i)}showTime(t,e,i){const{ctx:r}=this;r.font="11pt Arial",r.textAlign="left";const n=parseInt(t/3600,10),s=parseInt((t-3600*n)/60,10),o=parseInt(t-3600*n-60*s,10),h=String(n).padStart(2,"0"),a=String(s).padStart(2,"0"),c=String(o).padStart(2,"0");r.fillText(`${h}:${a}:${c}`,e,i)}drawPill(t,e,i,r,n="#34e7e4"){const s=r/2,o=i-2*s,{ctx:h}=this;h.beginPath(),h.strokeStyle="#555",h.fillStyle=n,h.arc(t+s,e+s,s,gt(90),gt(270)),h.lineTo(t+o,e),h.arc(t+s+o,e+s,s,gt(270),gt(90)),h.lineTo(t+s,e+2*s),h.stroke(),h.fill(),h.moveTo(t+i/2,e),h.lineTo(t+i/2,e+r),h.stroke(),h.closePath()}};function vt(t,e){const{x:i,y:r}=t.pos;let n,s,o,h;if("radius"in t){const{radius:e}=t;n=i-e,s=i+e,o=r-e,h=r+e}else{const{width:e,height:a}=t;n=i,s=i+e,o=r,h=r+a}const a=e.y,c=e.y+e.height,l=e.x,u=e.x+e.width;return o<=c&&o>=a&&n>=l&&s<=u?"TOP":n<=u&&n>=l&&o>=a&&h<=c?"LEFT":h<=c&&h>=a&&n>=l&&s<=u?"BOTTOM":s>=l&&s<=u&&o>=a&&h<=c?"RIGHT":""}i(3),i(4);const xt=function(t,e,i,r){return t.width=e*r,t.height=i*r,t.style.width=e+"px",t.style.height=i+"px",t.getContext("2d").setTransform(r,0,0,r,0,0),t}(document.getElementById("canvas"),400,500,s),_t=xt.width/s,kt=xt.height/s,Bt=xt.getContext("2d"),mt=new wt(Bt);let Tt=null;const St=t=>{Bt.clearRect(0,0,_t,kt);const{ship:e,ball:i}=t;e.setCanvasSize(_t,kt);const r=e.getRect();e.isBallSticked&&i.setPos(r.x+parseInt(r.width/2),r.y-i.radius),e.isBallSticked||t.isPaused||t.hasWon||t.hasLost||i.setNextPos();let s=[new et({x:0,y:-1,width:_t,height:1}),new et({x:-1,y:0,width:1,height:kt}),new et({x:_t,y:0,width:1,height:kt})].map(t=>vt(i,t)).filter(t=>t);const o=vt(i,r);o&&s.push(o);const h=[],a=t.bricks.map(t=>vt(i,t)).filter((t,e)=>(t&&h.push(e),t));if(t.clearBricks(h),a.length>0&&t.effect!==l&&(s=s.concat(a)),s.length>0&&!n()(s,Tt)){if(i.setDegreeByCollisions(s),"BOTTOM"===o){let t=i.degree+e.power;t<30&&(t=30),t>150&&(t=150),i.setDegree(t),e.power=0}Tt=s}mt.fillRect(r),t.bricks.forEach(t=>{mt.fillRect(t,t.color),mt.rect(t)}),t.pills.forEach((e,i)=>{t.isPaused||t.hasWon||t.hasLost||e.setNextPos(),mt.drawPill(e.pos.x,e.pos.y,e.width,e.height,"#"+Math.floor(16777215*Math.random()).toString(16))}),t.pills.forEach((e,i)=>{e.pos.y>kt+30&&t.pills.splice(i,1),vt(e,r)&&(t.pills.splice(i,1),t.applyPillEffect())}),t.clearEffectIfNeeded(),mt.drawCircle(i.pos.x,i.pos.y,i.radius),mt.showScore(t.score,_t-10,20),mt.showLevel(t.level,_t/2,20),mt.showTime(t.getDuration(),10,20),t.check(kt),t.hasWon?t.hasNextLevel()?(mt.showGameTip(`level ${t.level} cleared`,_t/2,kt/2+40),pt()-t.wonTime>2&&(t.toNextLevel(),e.isBallSticked=!0)):(mt.showGameTip("all level cleared !",_t/2,kt/2+40),mt.showGameTip("thanks for playing !",_t/2,kt/2+60)):t.hasLost&&(mt.showGameTip("you lost",_t/2,kt/2+40),pt()-t.lostTime>2&&t.reset()),t.isStarted||pt()%2!=0&&mt.showGameTip("press space key to start",_t/2,kt/2+40),t.isPaused&&pt()%2!=0&&mt.showGameTip("press esc key to resume",_t/2,kt/2+40)};new yt(t=>{t.effect!==f?(St(t),t.effect===u&&+new Date%2==0&&St(t)):+new Date%3==0&&St(t)})}]);